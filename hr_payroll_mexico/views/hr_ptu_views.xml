<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

    <record id="view_hr_ptu_form" model="ir.ui.view">
        <field name="name">hr.ptu.form</field>
        <field name="model">hr.ptu</field>
        <field name="arch" type="xml">
        <form string="PTU">
            <header>
                <button string="Generate" name="%(action_hr_ptu_employee)d" type="action" class="oe_highlight"
                        context="{'default_ptu_id': active_id}"/>
                <button string="Approve" name="action_approve" type="object"
                        attrs="{'invisible': [('state', '!=', 'done')]}"/>
                <button string="Pass to Done" name="action_done" type="object"
                        attrs="{'invisible': [('state', '!=', 'approve')]}"/>
                <widget name="calculate_ptu_lot" states="draft"/>
                <widget name="recalculate_ptu_lot" states="done"/>
                <field name="state" widget="statusbar"/>
            </header>
            <sheet>
                <div>
                    <h1 class="oe_title">
                        <field name="name" class="oe_inline" attrs="{'readonly': [('state', '=', 'approve')]}"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="company_id" groups="base.group_multi_company" options='{"no_open":True}'/>
                        <field name="tax_profit" attrs="{'readonly': [('state', '=', 'approve')]}"/>
                        <field name="highest_salary" attrs="{'readonly': [('state', '=', 'approve')]}"/>
                    </group>
                    <group>
                        <field name="total_days" readonly="1"/>
                        <field name="total_salary" readonly="1"/>
                        <field name="factor_days" readonly="1"/>
                        <field name="factor_salary" readonly="1"/>
                        <field name="total_ptu" readonly="1"/>
                    </group>
                </group>
                <notebook>
                    <page name="results" string="Results">
                        <field name="line_ids" readonly="1"/>
                    </page>
                </notebook>
            </sheet>
        </form>
        </field>
    </record>

    <record id="view_hr_ptu_tree" model="ir.ui.view">
        <field name="name">hr.ptu.tree</field>
        <field name="model">hr.ptu</field>
        <field name="arch" type="xml">
            <tree string="PTU">
               <field name="name"/>
               <field name="company_id" groups="base.group_multi_company"/>
               <field name="total_days"/>
               <field name="total_salary"/>
            </tree>
        </field>
    </record>

    <record id="view_hr_ptu_search" model="ir.ui.view">
        <field name="name">hr.ptu.search</field>
        <field name="model">hr.ptu</field>
        <field name="arch" type="xml">
            <search string="PTU">
               <field name="name"/>
               <field name="tax_profit"/>
               <field name="highest_salary"/>
               <field name="company_id" optional="hide"/>
            </search>
        </field>
    </record>

    <record id="action_hr_ptu" model="ir.actions.act_window">
        <field name="name">PTU</field>
        <field name="res_model">hr.ptu</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_hr_ptu_tree"/>
        <field name="search_view_id" ref="view_hr_ptu_search"/>
    </record>

    <record id="view_hr_ptu_line_form" model="ir.ui.view">
        <field name="name">hr.ptu.line.form</field>
        <field name="model">hr.ptu.line</field>
        <field name="arch" type="xml">
        <form string="PTU line" create="0">
            <sheet>
                <group>
                    <group>
                        <field name="employee_id" readonly="1"/>
                        <field name="contract_id" readonly="1"/>
                        <field name="total_amount" readonly="1"/>
                        <field name="calculated" readonly="1"/>
                        <field name="limit" readonly="1"/>
                    </group>
                    <group>
                        <field name="total_days" readonly="1"/>
                        <field name="total_salary" readonly="1"/>
                        <field name="factor_days" readonly="1"/>
                        <field name="factor_salary" readonly="1"/>
                    </group>
                </group>
            </sheet>
        </form>
        </field>
    </record>

    <record id="view_hr_ptu_line_tree" model="ir.ui.view">
        <field name="name">hr.ptu.line.tree</field>
        <field name="model">hr.ptu.line</field>
        <field name="arch" type="xml">
            <tree string="PTU line" create="0">
               <field name="employee_id"/>
               <field name="contract_id"/>
               <field name="total_days"/>
               <field name="total_salary"/>
               <field name="factor_days"/>
               <field name="factor_salary"/>
               <field name="total_amount"/>
            </tree>
        </field>
    </record>

    <record id="action_hr_ptu_lines" model="ir.actions.act_window">
        <field name="name">PTU Details</field>
        <field name="res_model">hr.ptu.line</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem action="action_hr_ptu"
          name="PTU"
          id="menu_hr_ptu"
          parent="hr_payroll.menu_hr_payroll_employees_root"
          groups="hr_payroll.group_hr_payroll_user" sequence="40"/>

    <menuitem action="action_hr_ptu_lines"
          name="PTU Details"
          id="menu_hr_ptu_lines"
          parent="hr_payroll.menu_hr_payroll_employees_root"
          groups="hr_payroll.group_hr_payroll_user" sequence="45"/>

    </data>
</odoo>